<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<style>
		.box{
			width:800px;
			border: 1px solid red;
			margin: auto;
			padding: 30px;
		}
		.up{
			display: flex;
			justify-content: space-between;
			border: 1px dashed blue;
		}
		.btn{
			text-align: right;
		}
		.content{
			width: 100%;
			height: 100px;
		}
		p{
			border: 1px dashed blue;
		}
	</style>
</head>
<body>
	<div class="box">
		<h3>留言板</h3>
		<!-- 渲染部分 -->
		<div class="exhibit">
			<!-- <div class="message">
				<div class="up">
					<span>小周</span>
					<span>2020/12/30/ 00:00:00</span>
				</div>
				<p>留言的内容显示</p>
				<div class="btn">
					<a href="#" class="del" id="del_0">删除</a>
				</div>
			</div> -->
		</div>
		<div class="messagetext">
			<textarea class="content"></textarea>
			<div class="btn">
				<a href="#" class="add">留言</a>
			</div>
		</div>
	</div>
	<script>
		// gettime();
		var data = [];
		var add = document.getElementsByClassName("add")[0];
		var content = document.getElementsByClassName("content")[0];
		var exhibit = document.getElementsByClassName("exhibit")[0];
		//添加留言
		add.onclick = function(){
			var mesg = content.value;
			if(mesg.trim() != ""){
				data.push({
					name: "小周"+data.length,
					time: gettime(),
					mesg: mesg
				});
				xuanran();
				content.value = "";
			}
		}
		//渲染留言显示
		function xuanran(){
			exhibit.innerHTML = data.map(function(item,index){
				return `<div class="message">
				<div class="up">
					<span>${item.name}</span>
					<span>${item.time}</span>
				</div>
				<p>${item.mesg}</p>
				<div class="btn">
					<a href="#" class= "del" id="del_${index}">删除</a>
				</div>
			</div> `;
			}).join("");
		}
		//删除数据
		exhibit.addEventListener("click",function(e){
			console.log(e);
			if(e.target.className == "del" ){
				var id = this.id;
                    id = id.substr(4);
                    data.splice(id, 1);
                    xuanran();
			}
		})
		function gettime(){
			var timenow = new Date();
			console.log(timenow);
		}
	</script>
</body>
</html>